{"version":3,"file":"p__forum-manage__topic__models__model.js.79d0cd22.async.js","sources":["src/pages/forum-manage/topic/models/model.js"],"sourcesContent":["import { message } from 'antd'\nimport { getListData ,getUsersList,deleteTopic,pinnedTopic,getApplyStatus} from '../api'\n\nexport default {\n  namespace: 'topic',\n  state: {\n    listData: [], // 数据\n    applyStatusList:[],\n    userList:[]\n  },\n  effects: {\n    // 获取数据\n    * getListData({ params }, { call, put }) {\n      const {data, total, pageNumber, pageSize} = yield call(getListData, params)\n      yield put({\n        type: 'save',\n        payload: {\n          listData: data || [],\n          pagination: {\n            current: pageNumber,\n            pageSize,\n            total,\n            showTotal: sum => `共 ${sum} 项`,\n          },\n        },\n      })\n    },\n\n      //获取选择时间内发布笔记的用户列表\n      *getUsersList({ params }, { call, put }){\n        const {success,data} = yield call(getUsersList, params)\n        yield put({\n          type: 'save',\n          payload: {\n            userList:data\n          },\n        })\n      },\n\n    //审核状态\n    *getApplyStatus({ params }, { call, put }){\n      const {success,data} = yield call(getApplyStatus, params)\n      yield put({\n        type: 'save',\n        payload: {\n          applyStatusList:data\n        },\n      })\n    },\n       // 删除数据\n       * deleteTopic({ params,cb }, { call, put }) {\n        const {success} = yield call(deleteTopic, params)\n        console.log(success)\n        if (success) {\n          message.success('操作成功')\n          cb && cb()\n        } else {\n          message.error('操作失败')\n        }\n      },\n      // 置顶数据\n      * pinnedTopic({ params,cb }, { call, put }) {\n        const {success} = yield call(pinnedTopic, params)\n        if (success) {\n          message.success('操作成功')\n          cb && cb()\n        } else {\n          message.error('操作失败')\n        }\n      },\n  },\n  reducers: {\n    save(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n  },\n}\n"],"mappings":"AAGA","sourceRoot":""}