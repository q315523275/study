{"version":3,"file":"layout__.4330a7fd.async.js","sources":["src/pages/system-manage/institutional/index.js"],"sourcesContent":["import React, { Component, Fragment } from 'react'\nimport {\n  Card, Table, Form, Input, Select, Button,\n} from 'antd'\nimport { connect } from 'dva'\nimport router from 'umi/router'\nimport moment from 'moment'\nimport SearchFilter from '@/components/SearchFilter'\nimport style from './style.less'\n\nconst { Option } = Select\n@Form.create()\n@connect(({ schoolLibrary, loading }) => ({ ...schoolLibrary, loading: loading.effects['schoolLibrary/getListData'] }))\nclass Example extends Component {\n  columns = [\n    {\n      title: '学科',\n      dataIndex: 'name3',\n      key: 'name3',\n      ellipsis: true,\n    },\n    {\n      title: '学制',\n      dataIndex: 'name4',\n      key: 'name4',\n      ellipsis: true,\n    },\n    {\n      title: '专业中文名称',\n      dataIndex: 'name1',\n      key: 'name1',\n      ellipsis: true,\n    },\n    {\n      title: '专业英文名称',\n      dataIndex: 'name2',\n      key: 'name2',\n      ellipsis: true,\n    },\n    {\n      title: 'USNEWS排名',\n      dataIndex: 'name5',\n      key: 'name5',\n      ellipsis: true,\n    },\n    {\n      title: 'QS排名',\n      dataIndex: 'name6',\n      key: 'name6',\n      ellipsis: true,\n    },\n    {\n      title: '泰晤士排名',\n      dataIndex: 'name7',\n      key: 'name7',\n      ellipsis: true,\n    },\n    {\n      title: '上海交大排名',\n      dataIndex: 'name7',\n      key: 'name7',\n      ellipsis: true,\n    },\n    {\n      title: '是否热门专业',\n      dataIndex: 'name8',\n      key: 'name8',\n      ellipsis: true,\n    },\n    {\n      title: '备注',\n      dataIndex: 'name9',\n      key: 'name9',\n      ellipsis: true,\n    },\n    {\n      title: '操作',\n      dataIndex: 'id',\n      key: 'id',\n      render: id => (\n        <Fragment>\n          <Button type=\"link\" onClick={() => router.push(`/school-library/edit/${id}`)}>编辑</Button>\n          <Button style={{ marginRight: 10 }} type=\"link\">删除</Button>\n        </Fragment>\n      ),\n    },\n  ]\n\n  componentDidMount() {\n    // this.getInitialData({})\n  }\n\n  getInitialData=({ pageNum = 1, pageSize = 10 }) => {\n    this.props.dispatch({\n      type: 'report/getListData',\n      params: {\n        pageNum,\n        pageSize,\n      },\n    })\n  }\n\n  // 表格change事件\n  tableChange = ({ current, pageSize }) => {\n    // this.getInitialData({ pageNum: current, pageSize })\n  }\n\n  // 搜索\n  handleSearch=() => {\n    const { form: { validateFields } } = this.props\n    validateFields((errors, values) => {\n      if (!errors) {\n        const submitData = {}\n        Object.keys(values).forEach((key) => {\n          if (values[key] !== undefined && values[key] !== '') { // 无该条件就不传该字段\n            submitData[key] = values[key]\n          }\n        })\n        // this.getInitialData({ query: submitData })\n      }\n    })\n  }\n\n  // 重置\n  handleReset=() => {\n    this.props.form.resetFields()\n    // this.getInitialData({})\n  }\n\n  render() {\n    const {\n      loading, listData, pagination, form: { getFieldDecorator },\n    } = this.props\n    return (\n      <Card title=\"例子\" bordered={false} className={style.schoolLibrary}>\n        <SearchFilter handleSearch={this.handleSearch} handleReset={this.handleReset} span={8}>\n          <Form.Item label=\"国家/地区\">\n            {getFieldDecorator('name3')(\n              <Input maxLength={30} placeholder=\"请输入\" />,\n            )}\n          </Form.Item>\n          <Form.Item label=\"院校中文名\">\n            {getFieldDecorator('name1')(\n              <Input maxLength={30} placeholder=\"请输入\" />,\n            )}\n          </Form.Item>\n          <Form.Item label=\"院校英文名\">\n            {getFieldDecorator('name2')(\n              <Input maxLength={30} placeholder=\"请输入\" />,\n            )}\n          </Form.Item>\n        </SearchFilter>\n        <Button type=\"primary\" style={{ marginBottom: 10 }} onClick={() => router.push('/school-library/add')}>新增</Button>\n        <Table\n          rowKey=\"id\"\n          dataSource={listData}\n          // loading={loading}\n          pagination={pagination}\n          columns={this.columns}\n          onChange={this.tableChange}\n        />\n      </Card>\n    )\n  }\n}\n\nexport default Example\n"],"mappings":"AAUA","sourceRoot":""}