{"version":3,"file":"p__resource-library__school-case__models__edit.js.0beb4ed7.async.js","sources":["src/pages/resource-library/school-case/models/edit.js"],"sourcesContent":["import { message } from 'antd'\nimport router from 'umi/router'\nimport { editCase ,getAllSubject,getAllDegree,detailCase} from '../api'\n\nexport default {\n  namespace: 'schoolCaseEdit',\n  state: {\n    initData:null,\n    subjectList:[],\n    degreeList:[]\n  },\n  effects: {\n   //详情\n   * getInitData({ params }, { call, put }) {\n    const initData= yield call(detailCase, params)\n    yield put({\n      type: 'save',\n      payload: {\n        initData\n      },\n    })\n  },\n    //下拉数据\n    * getSelectData({ params }, { call, put }) {\n      const subjectList= yield call(getAllSubject, params)\n      const degreeList= yield call(getAllDegree, params)\n      yield put({\n        type: 'save',\n        payload: {\n          subjectList,\n          degreeList\n        },\n      })\n    },\n    // 新增\n    * getEdit({ params }, { call, put }) {\n      const {success} = yield call(editCase, params)\n      if (success) {\n      message.success('操作成功')\n      router.push('/resource-library/school-Case')\n      } else {\n        message.error('操作失败')\n      }\n    },\n      *clearAll(_,{put}){\n        yield put({\n          type: 'save',\n          payload: {\n            subjectList:[],\n            pagination: { // Table分页配置项\n            current: 1,\n            pageSize: 10,\n            total: null,\n            },\n          },\n        })\n      }\n\n  },\n  reducers: {\n    save(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n  },\n}\n"],"mappings":"AAIA","sourceRoot":""}