{"version":3,"file":"p__resource-library__school-domain__models__add.js.4f83f27b.async.js","sources":["src/pages/resource-library/school-domain/models/add.js"],"sourcesContent":["import { message } from 'antd'\nimport router from 'umi/router'\nimport { addSubject,subjectCanAdd } from '../api'\n\nexport default {\n  namespace: 'schoolDomainAdd',\n  state: {\n    subjectList:[],\n    pagination: { // Table分页配置项\n      current: 1,\n      pageSize: 10,\n      total: null,\n    },\n  },\n  effects: {\n    //获取数据表\n    * getSubjectCanAdd({ params }, { call, put }) {\n      const {data,total,pageNumber} = yield call(subjectCanAdd, params)\n      yield put({\n        type: 'save',\n        payload: {\n          subjectList:data,\n          pagination: { // Table分页配置项\n            current: pageNumber,\n            pageSize: 10,\n            total,\n          },\n        },\n      })\n    },\n    // 新增\n    * getAdd({ params }, { call, put }) {\n      const {success} = yield call(addSubject, params)\n      if (success) {\n      message.success('操作成功')\n      router.push('/resource-library/school-domain')\n      } else {\n        message.error('操作失败')\n      }\n    },\n      *clearAll(_,{put}){\n        yield put({\n          type: 'save',\n          payload: {\n            subjectList:[],\n            pagination: { // Table分页配置项\n            current: 1,\n            pageSize: 10,\n            total: null,\n            },\n          },\n        })\n      }\n\n  },\n  reducers: {\n    save(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n  },\n}\n"],"mappings":"AAIA","sourceRoot":""}